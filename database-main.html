
<!doctype html>
<html lang="en" class="theme-classic">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.80.0">
    <title>Cherry Archive - Database</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/4.6/examples/starter-template/">



    <!-- Bootstrap core CSS -->
<link rel="stylesheet" href="bootstrap-4.6.0-dist/css/bootstrap.min.css">

<link rel="stylesheet" href="fonts/stylesheet.css">
<!--<link rel="stylesheet" href="bootstrap-4.6.0-dist/css/navbar-fixed-right.css">-->
<link rel="stylesheet" href="bootstrap-4.6.0-dist/css/bootstrap-select.min.css">




    <!-- Favicons -->
<link rel="icon" href="favicon.png">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;1,900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="bootstrap-4.6.0-dist/css/themes.css">
<link rel="stylesheet" href="bootstrap-4.6.0-dist/css/custom-cherry.css">


  </head>
  <body>

<nav class="navbar sticky-top navbar-expand-md navbar-dark bg-dark">
  <a class="navbar-brand" href="#"><img src="transparent.png" alt="" width="120" height="40" id="site-logo" class="site-logo"></a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarsExampleDefault">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item">
        <a class="nav-link" href="index.html">Home</a>
      </li>
      <li class="nav-item active">
        <a class="nav-link active" aria-current="page" href="database.html">Database</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="gallery.html">Gallery</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="submit.html">Submit</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="knowledge.html">Knowledge Base</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="about.html">About</a>
      </li>
    </ul>
  </div>
</nav>
<div id="pagination-wrapper" class="footer"></div>
<div class="container-fluid">
  <div class="row">
    <div class="col-10 nopadding">
    <table class="table table-responsive-1920 table-striped table-bordered table-sm text-nowrap">
      <thead>
        <tr class="sticky text-center">
          <th colspan="3">Article Number</th>
          <th colspan="4">Keyboard Specifications</th>
          <th colspan="4">Layout</th>
          <th colspan="5">Keycaps</th>
        </tr>
        <tr class="stickynest" id="table-head">
          <th>
            <select class="selectpicker" multiple id="Series" title="Series" data-width="100%" data-selected-text-format="static" data-actions-box="true">
            </select>
          </th>
          <th>
            <select class="selectpicker" multiple id="Model" title="Model" data-width="100%" data-selected-text-format="static" data-actions-box="true">
            </select>
          </th>
          <th>
            <select class="selectpicker" multiple id="Article" title="Article" data-width="100%" data-selected-text-format="static" data-actions-box="true">
            </select>
          </th>
          <th>
            <select class="selectpicker" multiple id="kbSwitch" title="Switch" data-width="100%" data-selected-text-format="static" data-actions-box="true">
            </select>
          </th>
          <th>
            <select class="selectpicker" multiple id="kbInterface" title="Interface" data-width="100%" data-selected-text-format="static" data-actions-box="true">
            </select>
          </th>
          <th>
            <select class="selectpicker" multiple id="kbBrand" title="Brand" data-width="100%" data-selected-text-format="static" data-actions-box="true">
            </select>
          </th>
          <th>
            <select class="selectpicker" multiple id="caseStyle" title="Case Style" data-width="100%" data-selected-text-format="static" data-actions-box="true">
            </select>
          </th>
          <th>
            <select class="selectpicker" multiple id="languagePrimary" title="Language" data-width="100%" data-selected-text-format="static" data-actions-box="true">
            </select>
          </th>
          <th>
            <select class="selectpicker" multiple id="layoutSub" title="Secondary Language" data-width="100%" data-selected-text-format="static" data-actions-box="true">
            </select>
          </th>
          <th>
            <select class="selectpicker" multiple id="layoutSize" title="Size" data-width="100%" data-selected-text-format="static" data-actions-box="true">
            </select>
          </th>
          <th>
            <select class="selectpicker" multiple id="layoutType" title="Type" data-width="100%" data-selected-text-format="static" data-actions-box="true">
            </select>
          </th>
          <th>
            <select class="selectpicker" multiple id="keycapMaterial" title="Material" data-width="100%" data-selected-text-format="static" data-actions-box="true">
            </select>
          </th>
          <th>
            <select class="selectpicker" multiple id="keycapThickness" title="Thickness" data-width="100%" data-selected-text-format="static" data-actions-box="true">
            </select>
          </th>
          <th>
            <select class="selectpicker" multiple id="keycapPrimary" title="Legend Print" data-width="100%" data-selected-text-format="static" data-actions-box="true">
            </select>
          </th>
          <th>
            <select class="selectpicker" multiple id="keycapSub" title="Sub Legend Print" data-width="100%" data-selected-text-format="static" data-actions-box="true">
            </select>
          </th>
          <th>
            <select class="selectpicker" multiple id="keycapScheme" title="Colour Scheme" data-width="100%" data-selected-text-format="static" data-actions-box="true">
            </select>
          </th>
        </tr>
      </thead>
      <tbody id="table-body">
      </tbody>
    </table>
  </div>
    <div class="sidenav col-2 text-center" id="side-filters">
      <p style="padding-top: 5.8px; text-decoration: underline;">Additional Filters</p>
      <hr>
      <p>Keyboard Specifications</p>
        <select class="selectpicker additional" multiple id="kbKRO" title="Key Rollover" data-selected-text-format="static" data-actions-box="true" data-actions-box="true">
        </select>
        <select class="selectpicker additional" multiple id="kbFeature" title="Keyboard Feature" data-selected-text-format="static" data-actions-box="true" data-actions-box="true">
        </select>
        <select class="selectpicker additional" multiple id="kbFeature2" title="Keyboard Feature2" data-selected-text-format="static" data-actions-box="true" data-actions-box="true">
        </select>
        <select class="selectpicker additional" multiple id="switchPlate" title="Switchplate" data-selected-text-format="static" data-actions-box="true" data-actions-box="true">
        </select>
        <select class="selectpicker additional" multiple id="switchSuper" title="MX Superblack" data-selected-text-format="static" data-actions-box="true" data-actions-box="true">
        </select>
        <select class="selectpicker additional" multiple id="switchLock" title="MX Lock" data-selected-text-format="static" data-actions-box="true" data-actions-box="true">
        </select>
        <select class="selectpicker additional" multiple id="caseColour" title="Case Colour" data-selected-text-format="static" data-actions-box="true" data-actions-box="true">
        </select>
      <p>Keycaps</p>
        <select class="selectpicker additional" multiple id="keycapNonstandard" title="Non-Standard Keycaps" data-selected-text-format="static" data-actions-box="true" data-actions-box="true">
        </select>
        <select class="selectpicker additional" multiple id="keycapSide" title="Side Legend Print" data-selected-text-format="static" data-actions-box="true" data-actions-box="true">
        </select>
        <select class="selectpicker additional" multiple id="keycapSecColour" title="Secondary Legend Colour" data-selected-text-format="static" data-actions-box="true" data-actions-box="true">
        </select>
        <select class="selectpicker additional" multiple id="keycapColour" title="Coloured Keycaps" data-selected-text-format="static" data-actions-box="true" data-actions-box="true">
        </select>
        <select class="selectpicker additional" multiple id="keycapWindow" title="LED Windows" data-selected-text-format="static" data-actions-box="true" data-actions-box="true">
        </select>
        <select class="selectpicker additional" multiple id="keycapCaps" title="Caps Lock Type" data-selected-text-format="static" data-actions-box="true" data-actions-box="true">
        </select>
        <select class="selectpicker additional" multiple id="keycapMX" title="MX Compatibility" data-selected-text-format="static" data-actions-box="true" data-actions-box="true">
        </select>
        <select class="selectpicker additional" multiple id="keycapSpace" title="Spacebar Size" data-selected-text-format="static" data-actions-box="true" data-actions-box="true">
        </select>
        <select class="selectpicker additional" multiple id="layoutWin" title="Windows Keys" data-selected-text-format="static" data-actions-box="true" data-actions-box="true">
        </select>
        <p></p>
        <p style="text-decoration: underline;">Themes</p>
        <hr>
        <button class="btn btn-outline-danger" id="classic-theme-selector" onclick="setTheme('theme-classic')">Classic</button>
        <button class="btn btn-outline-danger" id="dark-theme-selector" onclick="setTheme('theme-dark')">Dark</button>
        <button class="btn btn-outline-danger" id="light-theme-selector" onclick="setTheme('theme-light')">Light</button>
    </div>
</div>



<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="bootstrap-4.6.0-dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
<script>


 // function to set a given theme/color-scheme
 function setTheme(themeName) {
    localStorage.setItem('theme', themeName);
    document.documentElement.className = themeName;
  }


        // Immediately invoked function to set the theme on initial load
  (function () {
    if (localStorage.getItem('theme') === 'theme-dark') {
      setTheme('theme-dark');
    } else if (localStorage.getItem('theme') === 'theme-light') {
      setTheme('theme-light');
    } else {
      setTheme('theme-classic');
    }    
  })();

/*if ((data[i].Series).includes(value[x]))*/
        var masterTable = []
        $(document).ready(function(){
        $.ajax({
          method: 'GET',
          url:'/database2.json',
          success:function(response){
            masterTable = response
            state.querySet = masterTable
            buildFilters()
            buildTable()
          }
        })
        })
console.log(window.innerHeight)
tableHeightRaw = window.innerHeight-215
tableHeightAdj = tableHeightRaw - 10
rowQuantityRaw = tableHeightAdj/28.781
rowQuantity = Math.floor(rowQuantityRaw)
extraRowHeight = tableHeightRaw - rowQuantity*28.781
var state = {
  'querySet':masterTable,
  'page':1,
  'rows':rowQuantity,
  'window':5,
}

var filters = [
  "Series",
  "Model",
  "Article",
  "kbSwitch",
  "kbInterface",
  "kbBrand",
  "caseStyle",
  "languagePrimary",
  "layoutSub",
  "layoutSize",
  "layoutType",
  "keycapMaterial",
  "keycapThickness",
  "keycapPrimary",
  "keycapSub",
  "keycapScheme",
  "kbKRO",
  "kbFeature",
  "kbFeature2",
  "switchPlate",
  "switchSuper",
  "switchLock",
  "caseColour",
  "keycapNonstandard",
  "keycapSide",
  "keycapSecColour",
  "keycapColour",
  "keycapWindow",
  "keycapCaps",
  "keycapMX",
  "keycapSpace",
  "layoutWin"
]

var filtersMain = {
  "Series": "Series",
  "Model": "Model",
  "Article": "Article",
  "kbSwitch": "Switch",
  "kbInterface": "Interface",
  "kbBrand": "Brand",
  "caseStyle": "Case Style",
  "languagePrimary": "Language",
  "layoutSub": "Sub Language",
  "layoutSize": "Size",
  "layoutType": "Type",
  "keycapMaterial": "Material",
  "keycapThickness": "Thickness",
  "keycapPrimary": "Legend Print",
  "keycapSub": "Sub Legend Print",
  "keycapScheme": "Colour Scheme",
  "kbKRO": "Key Rollover",
  "kbFeature": "Keyboard Feature",
  "kbFeature2": "Keyboard Feature2",
  "switchPlate": "Switchplate",
  "switchSuper": "MX Superblack",
  "switchLock": "MX Lock",
  "caseColour": "Case Colour",
  "keycapNonstandard": "Non-Stndard Keycaps",
  "keycapSide": "Side Legend Print",
  "keycapSecColour": "Secondary Legend Colour",
  "keycapColour": "Coloured Keycaps",
  "keycapWindow": "LED Windows",
  "keycapCaps": "Caps Lock Type",
  "keycapMX": "MX Compatibility",
  "keycapSpace": "Spacebar Size",
  "layoutWin": "Windows Keys"
}

var filtersActive = {
  "Series": [""],
  "Model": [""],
  "Article": [""],
  "kbSwitch": [""],
  "kbInterface": [""],
  "kbBrand": [""],
  "caseStyle": [""],
  "languagePrimary": [""],
  "layoutSub": [""],
  "layoutSize": [""],
  "layoutType": [""],
  "keycapMaterial": [""],
  "keycapThickness": [""],
  "keycapPrimary": [""],
  "keycapSub": [""],
  "keycapScheme": [""],
  "kbKRO": [""],
  "kbFeature": [""],
  "kbFeature2": [""],
  "switchPlate": [""],
  "switchSuper": [""],
  "switchLock": [""],
  "caseColour": [""],
  "keycapNonstandard": [""],
  "keycapSide": [""],
  "keycapSecColour": [""],
  "keycapColour": [""],
  "keycapWindow": [""],
  "keycapCaps": [""],
  "keycapMX": [""],
  "keycapSpace": [""],
  "layoutWin": [""]
}


function buildFilters(){
  for (const index in filtersMain){
    console.log(index)
    var filter = document.getElementById(`${index}`)
    const uniqueItems = [...new Map(masterTable.map(item => [item[`${index}`]]))]
    for (var i = 0; i < uniqueItems.length; i++){
      if(uniqueItems[i][0] != ""){
      filter.innerHTML += `<option>${uniqueItems[i][0]}</option>`
      }
    }
  }
  $('.selectpicker').selectpicker('refresh');
}

//filtersMain.foreach(buildMainFilter)

function pagination(querySet, page, rows){
  var trimStart = (page - 1) * rows
  var trimEnd = trimStart + rows

  var trimmedData = querySet.slice(trimStart, trimEnd)

  var pages = Math.ceil(querySet.length/rows)

  return{
    'querySet':trimmedData,
    'pages':pages
  }
}

function buildTable(){
  var table = $('#table-body')

  var data = pagination(state.querySet, state.page, state.rows)
  console.log('Data:', data)

  keyboards = data.querySet

  for (var i in keyboards){
    var row = `<tr>
                <td><a href="keyboard.html#${keyboards[i].Index}"style="display:block;">${keyboards[i].Series}</a></td>
                <td><a href="keyboard.html#${keyboards[i].Index}"style="display:block;">${keyboards[i].Model}</a></td>
                <td><a href="keyboard.html#${keyboards[i].Index}"style="display:block;">${keyboards[i].Article}</a></td>
                <td>${keyboards[i].kbSwitch}</td>
                <td>${keyboards[i].kbInterface}</td>
                <td>${keyboards[i].kbBrand}</td>
                <td>${keyboards[i].caseStyle}</td>
                <td>${keyboards[i].languagePrimary}</td>
                <td>${keyboards[i].layoutSub}</td>
                <td>${keyboards[i].layoutSize}</td>
                <td>${keyboards[i].layoutType}</td>
                <td>${keyboards[i].keycapMaterial}</td>
                <td>${keyboards[i].keycapThickness}</td>
                <td>${keyboards[i].keycapPrimary}</td>
                <td>${keyboards[i].keycapSub}</td>
                <td>${keyboards[i].keycapScheme}</td>
                </tr>
                `
      table.append(row)

  }
  /*table.append(`<tr height="${extraRowHeight}px">
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                </tr>`)*/

  
  pageButtons(data.pages)
}

function pageButtons(pages){
  var wrapper = document.getElementById('pagination-wrapper')
  wrapper.innerHTML = ''

  var maxLeft = (state.page - Math.floor(state.window/2))
  var maxRight = (state.page + Math.floor(state.window/2))

  if (maxLeft < 1){
    maxLeft = 1
    maxRight = state.window
  }

  if (maxRight > pages){
    maxLeft = pages - (state.window - 1)
    maxRight = pages

    if (maxLeft < 1){
      maxLeft = 1
    }
  }

//  for (var page = maxLeft; page <= maxRight; page ++){
//    wrapper.innerHTML += `<button value=${page} class="page btn btn-sm btn-info">${page}</button>`
//  }

  for (var page = maxLeft; page < state.page; page ++){
    wrapper.innerHTML += `<button value=${page} class="page btn btn-sm btn-secondary">${page}</button>`
  }

  wrapper.innerHTML += `<button value=${state.page} class="page btn btn-sm btn-danger">${state.page}</button>`

  for (var page = (state.page + 1); page <= maxRight; page ++){
    wrapper.innerHTML += `<button value=${page} class="page btn btn-sm btn-secondary">${page}</button>`
  }

  wrapper.innerHTML = `<button value=${1} class="page btn btn-sm btn-secondary">&#171; First</button>` + wrapper.innerHTML

  wrapper.innerHTML += `<button value=${pages} class="page btn btn-sm btn-secondary">Last &#187;</button>`

  $('.page').on('click', function(){
    $('#table-body').empty()

    state.page = Number($(this).val())

    buildTable()
  })
}


/*$('#Series').on('change', function(){
  state.page = 1
  var value = $(this).val()
  if (value.length > 0){
  console.log(value)
  searchTable(value, masterTable)} else{
    value[0] = ""
    searchTable(value, masterTable)
  }
})*/

function searchTable(data){
  var filteredData = []
  //
  for (var i = 0; i < data.length; i++){
    var balls = filters.every(function(filter){
      if (filtersActive[filter][0] == ""){
        return filter
      } else{
          if (filtersActive[filter].includes(data[i][filter])){
            return filter
          }
      }


    })
    console.log(balls)
    if (balls){
      filteredData.push(data[i])
    }
    }

  //


  /*for (var x = 0; x < value.length; x++){
    for (var i = 0; i < data.length; i++){
      if ((data[i].Series).includes(value[x])){
        filteredData.push(data[i])
      }

    }
  }*/

  state.querySet = filteredData
  var table = document.getElementById('table-body')
  table.innerHTML = ''
  buildTable()
}

$('.selectpicker').on('change', function(){
  state.page = 1
  var value = $(this).val()
  var filter = $(this).attr('id')
  console.log(value.length)
  if (value.length > 0){
  filtersActive[filter] = value
  console.log(filtersActive)
  searchTable(masterTable)} else{
    filtersActive[filter] = [""]
    console.log(filtersActive)
    searchTable(masterTable)
  }
})






</script>

  </body>
</html>
